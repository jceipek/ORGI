<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale = 1.0, user-scalable = no">
<style>
body.bad{
	background:red;
}
body.good, body.bad.good{
	background: green;
}
</style>
</head>


<body>
<audio id="brrp" src="brrp.m4a" preload="auto" controls></audio>
<audio id="beat" src="beat.ogg" preload="auto" controls></audio>

<script>
var can_move = false;
window.ondevicemotion = function(event) {  
	var brrp = document.querySelector("#brrp");
	var beat = document.querySelector("#beat");

    var total = Math.pow(event.acceleration.x, 2) + Math.pow(event.acceleration.y, 2) + Math.pow(event.acceleration.z, 2);
	if (total > 1 && !can_move) {
		document.body.classList.add("bad");
		brrp.play();
	}
	else {
		document.body.classList.remove("bad");
	}
}

function start_moving() {
	setTimeout(function(){
		beat.play();
		setTimeout(stop_moving, 900);
	}, 500);
	can_move = true;
	document.body.classList.add("good");
}

function stop_moving() {
	can_move = false;
	document.body.classList.remove("good");
	setTimeout(start_moving, 400);
}

start_moving();

</script>
</body>
</html>